<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>作业历史情况</title>
		<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
		<link rel="stylesheet" href="../static/css/bootstrap.min.css">
		<link rel="stylesheet" href="../static/css/ready.css">
		<style>
			.status{
				display: flex;
				justify-content: space-around;
			}
			.status button{
				padding: 30px;
			}
			.inputbox{
				display: flex;
				justify-content: space-between;
			}
			.has-success .form-control {
				border-color: #ced4da;
				color: black;
			}
			.btn{
				display: inline;
			}
			#pagebox{
				display: flex;
				justify-content: flex-end;
			}
		</style>
	</head>

	<body>
		<div class="main-panel">
			<div class="content">
				<div class="container-fluid">
					<h4 class="page-title">试卷批改</h4>
					<!-- <div class="card">
						<div class="card-header">
							<h4 class="card-title">作业状态</h4>
						</div>
						<div class="card-body">
							<div class="row status">
								<button class="btn btn-primary btn-lg col-md-2" data-status="4">全部</button>	
								<button class="btn btn-primary btn-lg col-md-2"  data-status="0">未开始</button>
								<button class="btn btn-primary btn-lg col-md-2"  data-status="1">未结束</button>
								<button class="btn btn-primary btn-lg col-md-2" data-status="2">待批改</button>
								<button class="btn btn-primary btn-lg col-md-2" data-status="3">已批改</button>
							</div>
						</div>
					</div> -->
					<div class="card">
						<div class="card-header">
							<h4 class="card-title">考试历史记录</h4>
						</div>
						<div class="card-body workShow">
							<div class="row">
								<div class="col-md-12 inputbox">
									<!-- <div class="form-group col-md-4">
										<label for="squareSelect">班级</label>
										<select class="form-control input-square" id="squareSelect">
											<option>1</option>
											<option>2</option>
											<option>3</option>
											<option>4</option>
											<option>5</option>
										</select>
									</div>
									<div class="form-group has-success col-md-4">
										<label for="successInput">作业名称</label>
										<input type="text"  class="form-control" v-model="changValue">
									</div> -->
									</div>
									
								</div>
								<div class="row">
								<div class="col-md-12">
									<table class="table table-head-bg-success" style="text-align: center;">
										<thead>
											<tr>
												<th scope="col">名称</th>
												<th scope="col">开始时间</th>
												<th scope="col">结束时间</th>
												<th scope="col">班级</th>
												<th scope="col">状态</th>
												<th scope="col">考试类型</th>
												<th scope="col" style="text-align: center;">操作</th>
											</tr>
										</thead>
										<tbody>
											<tr  v-for="(obj,index) in list">
												<td>{{obj.name}}</td>
												<td>{{obj.starttime}}</td>
												<td>{{obj.endtime}}</td>
												<td>{{obj.cname}}</td>
												<td v-if="obj.status==0">未开始</td>
												<td v-if="obj.wStatus==1">未结束</td>
												<td v-if="obj.wStatus==2">待批改</td>
												<td v-if="obj.status==6">已批改</td>
												<td>{{obj.tname}}</td>
												<td style="display: flex;justify-content: center;">
													<button class="btn btn-success workinfo" style="margin-right: 5px;" v-bind:data-wid="obj.id">查看详情</button>
													<button class="btn btn-success workinfo" style="margin-right: 5px;" v-bind:data-wid="obj.id" v-if="obj.status==2" v-bind:data-id="obj.id" v-bind:data-cid="obj.cid">批改</button>
													<button class="btn btn-success workinfo" style="margin-right: 5px;" v-bind:data-wid="obj.id" v-if="obj.status!=2" disabled=ture>批改</button>
													<!--<button class="btn btn-success workcorrection" v-bind:data-cid="obj.cid" v-bind:data-wid="obj.id"  v-if="obj.wStatus==2">批改</button>
													<button class="btn btn-success workcorrection" v-bind:data-cid="obj.cid" v-bind:data-wid="obj.id"  v-if="obj.wStatus!=2" disabled=ture>批改</button> -->
													<!-- <button class="btn btn-success workcorrection" v-bind:data-cid="obj.cid" v-bind:data-wid="obj.id"  v-if="obj.wType==0" disabled=ture>批改</button> -->
												</td>
											</tr>
											<!-- <tr>
												<td>2</td>
												<td>Jacob</td>
												<td>Thornton</td>
												<td>@fat</td>
												<td>Otto</td>
												<td>Otto</td>
												<td style="display: flex;justify-content: center;">
													<button class="btn btn-success" style="margin-right: 5px;">查看详情</button>
													<button class="btn btn-success">批改</button>
												</td>
											</tr>
											<tr>
												<td>3</td>
												<td>Otto</td>
												<td>@mdo</td>
												<td>Otto</td>
												<td>@mdo</td>
												<td>Otto</td>
												<td style="display: flex;justify-content: center;">
													<button class="btn btn-success" style="margin-right: 5px;">查看详情</button>
													<button class="btn btn-success">批改</button>
												</td>
											</tr> -->
										</tbody>
									</table>
								</div>	
							</div>
								<div id="pagebox">
									<p class="demo">
										<ul class="pagination pg-primary">
											<li class="page-item">
												<a class="page-link" href="javascript:void(0)" id="previousPage"   aria-label="Previous">
													<span aria-hidden="true">&laquo;</span>
													<span class="sr-only">Previous</span>
												</a>
											</li>
											<li class="page-item active">
												<a class="page-link" href="#">1</a>
											</li>
											<li class="page-item">
												<a class="page-link" href="#">2</a>
											</li>
											<li class="page-item">
									 				<a class="page-link" href="#">3</a>
											</li>
											<li class="page-item">
												<a class="page-link" href="javascript:void(0)" id="nextPage"  aria-label="Next">
													<span aria-hidden="true">&raquo;</span>
													<span class="sr-only">Next</span>
												</a>
											</li>
										</ul>
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>

</html>
<script src="../static/js/core/jquery.min.js"></script>
<script src="../static/js/core/vue.js"></script>
<script>
	var v=new Vue({
		el:".workShow",
		data:{
			list:null
		}
	})
	//我布置的作业 
	/* function pageing(obj){
		$.ajax({
			type:"post",
			url:"http://127.0.0.1:8080/WorkCorrection/queryPublishWorkByTid",
			data:{tid:obj.tid,wStatus:obj.wStatus,cur:obj.cur},
			success:function(data){
				console.log(JSON.stringify(data))
				if(data.list.length>0 && obj.wStatus!=4){
					$("#previousPage").attr("data-status",data.list[0].wStatus)	//状态
					$("#nextPage").attr("data-status",data.list[0].wStatus)//状态
				}else{
					//没有下一页时候
					$("#previousPage").attr("data-status",-1)	//状态
					$("#nextPage").attr("data-status",-1)		//状态
				}
				//查询全部 
				if(obj.wStatus==4){
					$("#previousPage").attr("data-status",4)	//状态
					$("#nextPage").attr("data-status",4)		//状态
				}
				$("#previousPage").attr("data-pre",data.prePage)	//页码
				
				$("#nextPage").attr("data-next",data.nextPage)	//页码
				
				v.obj=data;
			}
		})
	} */
	$(function(){
		/* var obj={}
		obj.tid=1		//暂时死值
		obj.wStatus=4
		obj.cur=1
		//我布置的作业 
		pageing(obj)
		$("body").on("click",".status button",function(){
			var object={}
			object.tid=1	//暂时死值  教员id
			object.wStatus=$(this).attr("data-status")		//状态
			object.cur=1
			pageing(object)
		})
		//上一页
		$("body").on("click","#previousPage",function(){
			var object={}
			object.cur=$(this).attr("data-pre")
			object.tid=1;
			object.wStatus=$(this).attr("data-status")
			console.log($(this).attr("data-status"))
			pageing(object)
		})
		//下一页 
		$("body").on("click","#nextPage",function(){
			var object={}
			object.tid=1;
			object.cur=$(this).attr("data-next")
			object.wStatus=$(this).attr("data-status")
			console.log($(this).attr("data-status"))
			pageing(object)
		})
		
		$("body").on("click",".workinfo",function(){
			var cid=$(this).attr("data-cid")	//班级id
			var wid=$(this).attr("data-wid")	//作业id
			location.href="http://127.0.0.1:8080/WorkInfo/toWorkInfo?cid="+cid+"&wid="+wid
		})
		
		
		$("body").on("click",".workcorrection",function(){
			var cid=$(this).attr("data-cid")	//班级id
			var wid=$(this).attr("data-wid")	//作业id
			location.href="http://127.0.0.1:8080/WorkCorrection/toWorkCorrect?cid="+cid+"&wid="+wid
		}) */
		
		$.ajax({
			type:"get",
			url:"http://127.0.0.1:8080/TestCorrectionController/queryMyCorrectTest",
			data:{},
			success:function(data){
				v.list=data;
				console.log(JSON.stringify(data))
			}
		})
		
		//跳转到作业模板
		$("body").on("click",".workinfo",function(){
			var id=$(this).attr("data-id")
			var cid=$(this).attr("data-cid")
			location.href="http://127.0.0.1:8080/TestCorrectionController/toTestCorrect?tid="+id+"&cid="+cid
		})
	})
</script>