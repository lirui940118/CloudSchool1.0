<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>我的问卷</title>
<meta
	content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
	name='viewport' />
<link rel="stylesheet" th:href="@{/static/css/bootstrap.min.css}">
<link rel="stylesheet" th:href="@{/static/css/ready.css}">
<link rel="stylesheet" th:href="@{/static/css/demo.css}">
<style type="text/css">
/** {
				margin: 0px;
				padding: 0px;
				
			}*/
.card {
	margin-bottom: 10px;
}
</style>
</head>

<body>
	<div class="main-panel">
	
	
		<input type="hidden" id="zId" th:value="${zId}">
		<input type="hidden" id="wjcsjf_id" v-bind:value="item.wjcsjf_id">
		<div class="content" id="shuaxin" v-if="jihe">
			<div class="container-fluid" v-for="item in jihe.list">
				<h4 class="page-title">填写问卷</h4>
				<div>
					<div>
						<div class="card col-lg-12">
							<div class="card-body">
								<div class="col-lg-12 row">
									<div class="col-lg-2 col-md-2 col-sm-12">
										<h6>问卷名称：</h6>
									</div>
									<div class="col-lg-10 col-md-10 col-sm-12">
										<input type="text" class="form-control form-control"
											v-bind:placeholder="item.wjName">
									</div>
								</div>
								<div class="col-lg-12 row">
									<div class="col-lg-2 col-md-2 col-sm-12">
										<h6>说明：</h6>
									</div>
									<div class="col-lg-10 col-md-10 col-sm-12">
										<input type="text" class="form-control form-control"
											v-bind:placeholder="item.wjExplain">
									</div>
								</div>
							</div>
						</div>
						<div class="card col-lg-12">
							<div class="card-body">
								<div class="col-lg-12 row">
									<div class="col-lg-3">
										<h6>调查对象：</h6>
									</div>
									<div class="col-lg-2">
										<h6>{{item.peoplename}}</h6>
									</div>
									<div class="col-lg-5">
										<ul class="pagination pg-primary">
											<li class="page-item active">
												<a v-on:click="go(1)" class="page-link">首页</a>
											</li>
											<li class="page-item">
												<a v-on:click="go(jihe.prevPage)" class="page-link" aria-label="Previous">
													<span aria-hidden="true">«</span>
													<span class="sr-only">Previous</span>
												</a>
											</li>
											<li class="page-item active">
												<a v-on:click="go(jihe.currentPage)" class="page-link">{{jihe.currentPage}}</a>
											</li>
											<li class="page-item" v-if="jihe.currentPage + 1 <= jihe.totalPage">
												<a v-on:click="go(jihe.currentPage + 1)" class="page-link">{{jihe.currentPage + 1}}</a>
											</li>
											<li class="page-item" v-if="jihe.currentPage + 2 <= jihe.totalPage">
									 			<a v-on:click="go(jihe.currentPage + 2)" class="page-link">{{jihe.currentPage + 2}}</a>
											</li>
											<li class="page-item">
												<a v-on:click="go(jihe.nextPage)" class="page-link" aria-label="Next">
													<span aria-hidden="true">»</span>
													<span class="sr-only">Next</span>
												</a>
											</li>
											<li class="page-item active">
												<a v-on:click="go(jihe.totalPage)" class="page-link">尾页</a>
											</li>
										</ul>
									</div>
									<div class=" col-lg-2">
										<button v-on:click="tijiao(item.o_id,item.g_id,item.wjId)" class="btn btn-success">
											<font style="vertical-align: inherit;"> 提交 </font>
										</button>
									</div>
								</div>
							</div>
						</div>
						<div v-for="tm in item.listtm" class="card col-lg-12">
							<div class="card-body">
								<div class="col-lg-12 row">
									<div class="col-lg-10 row" >
										<p class="text-primary">
											<font style="vertical-align: inherit;">
												{{tm.wjtmName}}({{tm.wjtmTypeName}}) </font>
										</p>
									</div>
									<div class="col-lg-2 row">
										<input  type="text" name="wjtmId" v-bind:wjtmId="tm.wjtmId"
											class="form-control form-control" placeholder="请输入分数">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		
		
		
		
		<div class="content" id="shuaxin2" v-if="jihe2">
			<div class="container-fluid" v-for="item in jihe2.list">
				<h4 class="page-title">填写问卷</h4>
				<div>
					<div>
						<div class="card col-lg-12">
							<div class="card-body">
								<div class="col-lg-12 row">
									<div class="col-lg-2 col-md-2 col-sm-12">
										<h6>问卷名称：</h6>
									</div>
									<div class="col-lg-10 col-md-10 col-sm-12">
										<input type="text" class="form-control form-control"
											v-bind:placeholder="item.wjName">
									</div>
								</div>
								<div class="col-lg-12 row">
									<div class="col-lg-2 col-md-2 col-sm-12">
										<h6>说明：</h6>
									</div>
									<div class="col-lg-10 col-md-10 col-sm-12">
										<input type="text" class="form-control form-control"
											v-bind:placeholder="item.wjExplain">
									</div>
								</div>
							</div>
						</div>
						<div class="card col-lg-12">
							<div class="card-body">
								<div class="col-lg-12 row">
									<div class="col-lg-3">
										<h6>调查对象：</h6>
									</div>
									<div class="col-lg-2">
										<h6>{{item.peoplename}}</h6>
									</div>
									<div class="col-lg-5">
										<ul class="pagination pg-primary">
											<li class="page-item active">
												<a v-on:click="go(1)" class="page-link">首页</a>
											</li>
											<li class="page-item">
												<a v-on:click="go(jihe2.prevPage)" class="page-link" aria-label="Previous">
													<span aria-hidden="true">«</span>
													<span class="sr-only">Previous</span>
												</a>
											</li>
											<li class="page-item active">
												<a v-on:click="go(jihe2.currentPage)" class="page-link">{{jihe2.currentPage}}</a>
											</li>
											<li class="page-item" v-if="jihe2.currentPage + 1 <= jihe2.totalPage">
												<a v-on:click="go(jihe2.currentPage + 1)" class="page-link">{{jihe2.currentPage + 1}}</a>
											</li>
											<li class="page-item" v-if="jihe2.currentPage + 2 <= jihe2.totalPage">
									 			<a v-on:click="go(jihe2.currentPage + 2)" class="page-link">{{jihe2.currentPage + 2}}</a>
											</li>
											<li class="page-item">
												<a v-on:click="go(jihe2.nextPage)" class="page-link" aria-label="Next">
													<span aria-hidden="true">»</span>
													<span class="sr-only">Next</span>
												</a>
											</li>
											<li class="page-item active">
												<a v-on:click="go(jihe2.totalPage)" class="page-link">尾页</a>
											</li>
										</ul>
									</div>
									<div class=" col-lg-2">
										<button v-on:click="tijiao2()" class="btn btn-success">
											<font style="vertical-align: inherit;"> 提交 </font>
										</button>
									</div>
								</div>
							</div>
						</div>
						<div v-for="tm in item.listtm" name="xz" v-bind:wjcsId="item.wjcs_id" v-bind:wjtmIdxz="tm.wjtmId" class="card col-lg-12">
							<div class="card-body">
								<div class="col-lg-12 row">
									<div class="col-lg-10 row" >
										<p class="text-primary">
											<font  style="vertical-align: inherit;">
												{{tm.wjtmName}}({{tm.wjtmTypeName}}) </font>
										</p>
									</div>
									<div class="col-lg-2 row">
									</div>
								</div>
								<div v-if="item.wjTypeId == 6" class="col-lg-12 row">
									<div th:each="list:${zy}" class="col-lg-3 row">
										<label class="form-radio-label">
											<input th:mid="${list.mid}" th:wjxxName="${list.majorName}" class="form-radio-input" type="radio" name="zy">
											<span class="form-radio-sign" th:text="${list.majorName}"></span>
										</label>
									</div>
								</div>
								<div v-if="item.wjTypeId != 6" class="col-lg-12 row">
									<div  class="col-lg-3 row" v-for="xx in tm.listxx">
										<label class="form-radio-label">
											<input v-bind:value="xx.wjxxId" v-bind:wjxxName="xx.wjxxName" class="form-radio-input" type="radio" name="optionsRadios">
											<span class="form-radio-sign">{{xx.wjxxName}}</span>
										</label>
									</div>
								</div>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		
		
	</div>
</body>
<script th:src="@{/static/js/core/jquery.min.js}"></script>
<script th:src="@{/static/js/core/vue.js}" type="text/javascript"
	charset="utf-8"></script>
<script
	th:src="@{/static/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js}"></script>
<script th:src="@{/static/js/core/popper.min.js}"></script>
<script th:src="@{/static/js/plugin/chartist/chartist.min.js}"></script>
<script
	th:src="@{/static/js/plugin/chartist/plugin/chartist-plugin-tooltip.min.js}"></script>
<script
	th:src="@{/static/js/plugin/bootstrap-notify/bootstrap-notify.min.js}"></script>
<script th:src="@{/static/js/core/bootstrap.min.js}"></script>
<script
	th:src="@{/static/js/plugin/bootstrap-toggle/bootstrap-toggle.min.js}"></script>
<script th:src="@{/static/js/plugin/jquery-mapael/jquery.mapael.min.js}"></script>
<script
	th:src="@{/static/js/plugin/jquery-mapael/maps/world_countries.min.js}"></script>
<script th:src="@{/static/js/plugin/chart-circle/circles.min.js}"></script>
<script
	th:src="@{/static/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js}"></script>
<script th:src="@{/static/js/ready.min.js}"></script>

<script>
	//提交
	function tijiao2(){
		var jihe = [];
		$.each($("[name=xz]"),function(){
			var dx = {};
			var wjxxNamezy = $('input:radio[name="zy"]:checked').attr("wjxxName");
			var wjxxName = $('input:radio[name="sex"]:checked').attr("wjxxNamezy");
			if(wjxxName == undefined){
				dx.wjxxName = wjxxNamezy;
			}
			if(wjxxNamezy == undefined){
				dx.wjxxName = wjxxName;
			}	
			dx.wjtmId = $(this).attr("wjtmIdxz");
			dx.by1 = $('input:radio[name="zy"]:checked').attr("mid");
			dx.wjcsId = $(this).attr("wjcsId");
			jihe.push(dx);
		});
		console.log(jihe);
		$.ajax({
			url:"updateWjcs",
			data:JSON.stringify(jihe),
			type : 'post',
			contentType:"application/json",
			success:function(result){
				if(result > 0){
					shuaxin2(1);
					alert("成功！！！");
				}else{
					alert("失败！！！");
				}
			}
		})
	}
	var V2 = new Vue({
		el:"#shuaxin2",
		data:{
			jihe2:{}
		},methods:{
			tijiao2:function(){
				tijiao2();
			},go:function(currentPage){
				shuaxin2(currentPage)
				}
		}
	});
	function shuaxin2(currentPage){
		var wj={};
		wj.currentPage = currentPage;
		wj.zId = $("#zId").val();
		console.log(wj);
		$.ajax({
			url:"resetMyWenJuan2",
		    type:"post",
		    dataType:"json",
		    data:wj,
			success:function(result){
				console.log(result);
				V2.jihe2 = result;
			}
		})
	}
	//加载事件
	$(function(){
		shuaxin(1);
		shuaxin2(1);
	})
	
	
	
	//提交
	function tijiao(oId,gid,wjId){
		var jihe = [];
		$.each($("input[name='wjtmId']"),function(){
			var dx = {};
			dx.oId = oId;
			dx.gId = gid;
			dx.wjId = wjId;
			dx.tmId = $(this).attr("wjtmId");
			dx.tmScore = $(this).val();
			dx.zId = $("#zId").val();
			dx.wjcsjfId = $("#wjcsjf_id").val();
			jihe.push(dx);
		});
		console.log(jihe);
		$.ajax({
			url:"insertWjcsjfWS",
			data:JSON.stringify(jihe),
			type : 'post',
			contentType:"application/json",
			success:function(result){
				if(result > 0){
					shuaxin(1);
					alert("成功！！！");
				}else{
					alert("失败！！！");
				}
			}
		})
	}
	
	var V = new Vue({
		el:"#shuaxin",
		data:{
			jihe:{}
		},methods:{
			tijiao:function(oId,gid,wjId){
				tijiao(oId,gid,wjId);
			},go:function(currentPage){
				shuaxin(currentPage)
				}
		}
	});
	function shuaxin(currentPage){
		var wj={};
		wj.currentPage = currentPage;
		wj.zId = $("#zId").val();
		$.ajax({
			url:"resetMyWenJuan",
		    type:"post",
		    dataType:"json",
		    data:wj,
			success:function(result){
				console.log(result);
				V.jihe = result;
			}
		})
	}
</script>

</html>